<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodFusion | Your Dream Restaurant</title>
    <!-- Font & Icon Links -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css">
    
    <style>
        :root {
            --primary-gold: #5E35B1; /* Deep, elegant purple */

            --primary-purple: #5E35B1; /* Deep, elegant purple */
            --light-purple: #EDE7F6;
            --dark-grey: #121212; /* Deeper black for higher contrast */
            --medium-grey: #333333;
            --light-grey: #888888;
            --off-white: #F5F5F5;
            --white: #FFFFFF;
            --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 12px 28px rgba(0, 0, 0, 0.12);
            --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            --border-radius: 23px;
            --border-radius-sm: 8px;
        }
        /* --- GENERAL STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--off-white); color: var(--dark-grey); overflow-x: hidden; line-height: 1.6; font-family: "Outfit", sans-serif; }
        h1, h2, h3, h4 { font-family: 'Outfit', sans-serif; font-weight: 700; color: var(--dark-grey); }
        .page-container { padding: 1rem; padding-bottom: 6rem; width: 100%; max-width: 1400px; margin: 0 auto; min-height: calc(100vh - 80px - 300px); }
        .page { display: none; animation: fadeIn 0.5s forwards; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HEADER & NAVIGATION --- */
        .app-header { background: var(--white); padding: 1rem; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid #f0f0f0; height: 80px; }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1400px; margin: 0 auto; padding: 0 1rem; }
        .logo { font-family: 'Outfit', sans-serif; color: var(--dark-grey); font-size: 1.8rem; text-decoration: none; }
        .search-bar { display: flex; align-items: center; background: var(--white); border-radius: 50px; width: 350px; transition: var(--transition); border: 1px solid #e6e6e6; }
        .search-bar:focus-within { box-shadow: 0 0 0 3px var(--light-purple); border-color: var(--primary-purple); }
        .search-bar input { flex: 1; border: none; padding: 0.8rem 1.5rem; font-size: 0.9rem; outline: none; background: transparent; font-family: "Outfit", sans-serif; }
        .search-bar button { background: none; border: none; padding: 0 1.5rem; color: var(--medium-grey); cursor: pointer; font-size: 1rem; }
        .top-nav { display: none; background: var(--white); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); position: sticky; top: 80px; z-index: 900; }
        .top-nav-items { display: flex; justify-content: center; max-width: 1400px; margin: 0 auto; }
        .top-nav-item { padding: 1rem 1.5rem; color: var(--medium-grey); text-decoration: none; font-size: 1.1rem; font-weight: 500; transition: var(--transition); position: relative; display: flex; align-items: center; gap: 0.5rem; }
        .top-nav-item.active, .top-nav-item:hover { color: var(--dark-grey); }
        .top-nav-item:hover i, .top-nav-item.active i { color: var(--primary-gold); }
        .top-nav-item::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 0; height: 3px; background: var(--primary-gold); border-radius: 3px 3px 0 0; transition: width 0.3s ease; }
        .top-nav-item.active::after, .top-nav-item:hover::after { width: 60%; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; display: flex; justify-content: space-around; background: var(--white); box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); padding: 0.8rem 0; z-index: 100; border-top: 1px solid rgba(0,0,0,0.1); border-top-left-radius: 20px; border-top-right-radius: 20px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--medium-grey); text-decoration: none; font-size: 0.8rem; transition: var(--transition); position: relative; flex-grow: 1; padding: 0.2rem 0; }
        .nav-item i { font-size: 1.2rem; margin-bottom: 0.2rem; }
        .nav-item.active { color: var(--dark-grey); transform: translateY(-5px); }
        .nav-item.active i { color: var(--primary-gold); }
        .cart-count { background: var(--primary-purple); color: var(--white); font-size: 0.7rem; font-weight: 600; border-radius: 50%; width: 20px; height: 20px; display: none; align-items: center; justify-content: center; position: absolute; top: 10px; right: 10px; border: 2px solid var(--white); }
        .cart-count.visible { display: flex; }
        .nav-item .cart-count { top: -5px; right: 50%; transform: translateX(25px); }

        /* --- HERO & SECTIONS --- */
        .hero-banner { background-size: cover; background-position: center; height: 250px; border-radius: var(--border-radius); display: flex; flex-direction: column; justify-content: center; padding: 2rem; color: var(--white); margin-bottom: 2rem; position: relative; overflow: hidden; }
        .hero-banner::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to right, rgba(20, 20, 20, 0.9), rgba(94, 53, 177, 0.6)), url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=1470&q=80'); background-size: cover; background-position: center; transition: transform 0.6s ease-in-out; z-index: 1; }
        .hero-banner:hover::before { transform: scale(1.05); }
        .hero-banner h2, .hero-banner p { position: relative; z-index: 2; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .hero-banner h2 { font-size: 2rem; margin-bottom: 0.5rem; color: var(--white); }
        .hero-banner h2 span { color: var(--primary-gold); }
        .hero-banner p { font-size: 1rem; max-width: 80%; color: var(--off-white); font-family: 'Outfit', sans-serif; }
        .section-title { font-size: 2.2rem; margin: 2rem 0 1.5rem; color: var(--dark-grey); position: relative; padding-bottom: 0.5rem; }
        .section-title::after { content: ''; position: absolute; bottom: 0; left: 0; width: 60px; height: 4px; background: var(--primary-gold); transition: width 0.4s ease; }

        /* --- CATEGORIES --- */
        .categories { display: flex; gap: 0.8rem; overflow-x: auto; padding-bottom: 1.5rem; scrollbar-width: none; /* Firefox */ }
        .categories::-webkit-scrollbar { display: none; /* WebKit */ }
        .category { flex-shrink: 0; background: var(--white); border-radius: 50px; padding: 0.8rem 1.5rem; font-size: 1rem; font-weight: 500; border: 1px solid #eee; display: flex; align-items: center; gap: 0.5rem; cursor: pointer; transition: var(--transition); }
        .category i { font-size: 1rem; color: var(--medium-grey); }
        .category.active, .category:hover { background: var(--dark-grey); color: var(--white); border-color: var(--dark-grey); box-shadow: 0 8px 20px rgba(58, 46, 38, 0.15); }
        .category.active i, .category:hover i { color: var(--primary-gold); }

        /* --- PRODUCT CARD --- */
        .products-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 9px; }
        .product-card { background: var(--white); border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); transition: var(--transition); cursor: pointer; display: flex; flex-direction: column; position: relative; border: 1px solid #f0f0f0; }
        .product-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-hover); }
        .product-image-wrapper { width: 100%; height: 140px; overflow: hidden; }
        .product-image { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease; }
        .product-card:hover .product-image { transform: scale(1.08); }
        .product-info { padding: 1rem; flex-grow: 1; display: flex; flex-direction: column; }
        .product-title { font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--dark-grey); font-family: "Outfit", sans-serif; }
        .product-desc { font-size: 0.8rem; color: var(--light-grey); margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .product-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
        .product-price { font-weight: 700; color: var(--dark-grey); font-size: 1.1rem; }
        .add-to-cart { background: var(--dark-grey); color: var(--white); border: none; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: var(--transition); font-size: 1rem; }
        .add-to-cart:hover { transform: scale(1.1) rotate(90deg); background: var(--primary-purple); }
        .wishlist-btn { position: absolute; top: 0.75rem; right: 0.75rem; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(5px); border: 1px solid #eee; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1rem; color: var(--dark-grey); transition: var(--transition); cursor: pointer; z-index: 5; }
        .wishlist-btn:hover { background: var(--light-purple); }
        .wishlist-btn.wishlisted { background-color: #ff6b6b; color: white; animation: heartbeat 0.5s; }
        @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
        
        /* --- *** NEW: PRODUCT DETAIL PAGE *** --- */
        .product-detail-page-container { background: var(--white); border-radius: var(--border-radius); overflow: hidden; }
        .product-detail-container { display: flex; flex-direction: column; gap: 1rem; padding: 1.5rem; }
        .product-detail-image-container { width: 100%; border-radius: var(--border-radius-sm); overflow: hidden; aspect-ratio: 1 / 1; }
        #detail-image { width: 100%; height: 90%; object-fit: cover; }
        #detail-title { margin-top: 0; font-size: 2rem; }
        .detail-rating { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; color: var(--light-grey); }
        .detail-stars i { color: var(--primary-gold); }
        #detail-desc { color: var(--medium-grey); margin-bottom: 1.5rem; line-height: 1.7; font-family: 'Outfit', sans-serif; }
        .ingredients-list { margin: 1.5rem 0; padding: 1rem; background: var(--off-white); border-radius: var(--border-radius-sm); border-left: 4px solid var(--primary-gold); }
        .ingredients-list h4 { font-family: 'Outfit', sans-serif; font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem; }
        .ingredients-list p { color: var(--medium-grey); font-size: 0.9rem; }
        .detail-price-tag { font-size: 2.5rem; font-weight: 700; color: var(--dark-grey); margin-bottom: 1.5rem; }
        .detail-actions { display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem; }
        .quantity-control { display: flex; align-items: center; justify-content: center; gap: 1rem; }
        .quantity-control button { background: var(--off-white); border: 1px solid #ddd; width: 44px; height: 44px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; transition: var(--transition); }
        .quantity-control button:hover { background: var(--dark-grey); color: var(--white); }
        #detail-quantity { font-size: 1.5rem; font-weight: 600; min-width: 30px; text-align: center; }
        .detail-add-btn { background: var(--dark-grey); color: var(--white); border: none; width: 100%; padding: 1.2rem; border-radius: 50px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 0.8rem; }
        .detail-add-btn:hover { background: var(--primary-purple); transform: translateY(-3px); box-shadow: var(--shadow-hover); }
        .back-btn { background: transparent; color: var(--dark-grey); width: 100%; padding: 1.2rem; border-radius: 50px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 0.8rem; margin-top: 1rem; border: 1px solid #ddd; }
        .back-btn:hover { background: var(--off-white); }
        
        /* --- *** NEW: OFFERS PAGE *** --- */
        .offers-grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        .offer-card { background: linear-gradient(135deg, var(--primary-purple), #865DFF); color: var(--white); padding: 2rem; border-radius: var(--border-radius); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: var(--shadow); }
        .offer-card i { font-size: 3rem; margin-bottom: 1rem; color: var(--primary-gold); }
        .offer-card h3 { color: var(--white); font-size: 1.8rem; }
        .offer-card p { font-family: 'Outfit', sans-serif; margin-bottom: 1.5rem; opacity: 0.9; }
        .offer-code { background: rgba(255, 255, 255, 0.2); border: 2px dashed var(--white); padding: 0.5rem 1.5rem; border-radius: 50px; font-weight: 600; font-family: 'Outfit', sans-serif; letter-spacing: 1px; }

        /* --- CART & CHECKOUT --- */
        .cart-item { display: flex; gap: 1.5rem; margin-bottom: 1.5rem; padding: 1rem; border-radius: var(--border-radius-sm); background: var(--white); box-shadow: var(--shadow); transition: var(--transition); }
        .cart-item:hover { transform: translateX(5px); box-shadow: var(--shadow-hover); }
        .cart-item-image { width: 80px; height: 80px; object-fit: cover; border-radius: var(--border-radius-sm); }
        .cart-item-details { flex: 1; }
        .cart-item-title { font-weight: 600; margin-bottom: 0.5rem; font-family: "Outfit", sans-serif; }
        .cart-item-actions { display: flex; align-items: center; gap: 0.8rem; margin-top: 0.8rem;}
        .quantity-btn { background: var(--off-white); border: 1px solid #eee; width: 34px; height: 34px; border-radius: 50%; cursor: pointer; }
        .remove-btn { background: none; border: none; color: #d32f2f; cursor: pointer; margin-left: auto; width: 34px; height: 34px; border-radius: 50%; background: rgba(211, 47, 47, 0.05); }
        .checkout-form { background: var(--white); padding: 2rem; border-radius: var(--border-radius); margin-top: 2rem; box-shadow: var(--shadow); }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 0.5rem; }
        .form-group input { width: 100%; padding: 0.8rem 1rem; border: 1px solid #ccc; border-radius: var(--border-radius-sm); background-color: var(--off-white); }
        .form-group input:focus { outline: none; border-color: var(--primary-purple); box-shadow: 0 0 0 3px var(--light-purple); background-color: var(--white); }
        .cart-summary { padding: 2rem; border-radius: var(--border-radius); margin-top: 2rem; background: var(--off-white); }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 0.8rem; padding: 0.5rem 0; }
        .total-row { font-weight: 700; font-size: 1.2rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed var(--medium-grey); color: var(--dark-grey); }
        .checkout-btn { background: var(--dark-grey); color: var(--primary-gold); border: none; width: 100%; padding: 1.2rem; border-radius: 50px; font-size: 1rem; font-weight: 600; cursor: pointer; margin-top: 1rem; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 0.8rem; }
        .checkout-btn:hover:not(:disabled) { background: var(--primary-purple); color: var(--white); transform: translateY(-3px); }
        .checkout-btn:disabled { background-color: #ccc; color: #666; cursor: not-allowed; }
        
        /* --- OTHER COMPONENTS --- */
        .confirmation-container, .empty-state-container { text-align: center; padding: 3rem 1rem; background: var(--white); border-radius: var(--border-radius); box-shadow: var(--shadow); grid-column: 1 / -1; }
        .confirmation-icon i, .empty-state-container i { font-size: 4rem; color: var(--primary-gold); margin-bottom: 1.5rem; }
        .confirmation-icon i { animation: bounce 1s infinite alternate; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-15px); } }
        .app-footer { background: var(--dark-grey); color: var(--off-white); padding: 4rem 1.5rem 2rem; text-align: center; margin-top: 3rem; }
        .footer-content { max-width: 1200px; margin: 0 auto; display: grid; gap: 2rem; grid-template-columns: 1fr; }
        .footer-logo { font-family: 'Outfit', sans-serif; font-size: 2rem; color: var(--primary-gold); margin-bottom: 1rem; }
        .footer-links a { color: var(--off-white); text-decoration: none; transition: color 0.3s; }
        .footer-links a:hover { color: var(--primary-gold); }
        .social-links { display: flex; justify-content: center; gap: 1.5rem; margin-top: 1rem; }
        .social-link { color: var(--off-white); font-size: 1.5rem; transition: var(--transition); }
        .social-link:hover { color: var(--primary-gold); transform: translateY(-3px); }
        .copyright { font-size: 0.8rem; color: var(--light-grey); margin-top: 3rem; padding-top: 1.5rem; border-top: 1px solid var(--medium-grey); }
        .loading-spinner { display: none; position: fixed; inset: 0; background: rgb(255, 255, 255); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .loading-spinner.active { display: flex; }
        .spinner { width: 50px; height: 50px; border: 5px solid rgba(212, 175, 55, 0.3); border-radius: 50%; border-top-color: var(--primary-gold); animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        

.toast {
    visibility: hidden;
    min-width: 220px;
    max-width: calc(100% - 40px); /* Adjusted for mobile */
    background-color: #660883;
    color: #ffffff;
    text-align: center;
    padding: 12px 16px;
    position: fixed;
    z-index: 1002;
    opacity: 0;
    font-size: 14px;
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    left: 50%;
    transform: translateX(-50%) translateY(-20px) scale(0.9);
    top: 20px;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Show toast with bounce-in animation */
.toast.show {
    visibility: visible;
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
}
/* Different animation variations */
.toast.slide-in {
    transform: translateX(-50%) translateY(-100%);
}
.toast.slide-in.show {
    transform: translateX(-50%) translateY(0);
}

.toast.flip {
    transform: translateX(-50%) rotateX(90deg);
    transform-origin: top;
}
.toast.flip.show {
    transform: translateX(-50%) rotateX(0);
}

.toast.bounce {
    animation: bounceIn 0.6s;
}
@keyframes bounceIn {
    0% { transform: translateX(-50%) scale(0.3); opacity: 0; }
    50% { transform: translateX(-50%) scale(1.1); opacity: 1; }
    70% { transform: translateX(-50%) scale(0.9); }
    100% { transform: translateX(-50%) scale(1); }
}


/* Mobile adjustments */
@media (max-width: 768px) {
    .toast {
        right: 15px;
        top: 60px; /* Adjust for mobile header height */
        min-width: 80%;
        font-size: 13px;
        padding: 8px 12px;
        height: fit-content;
    }
}

/* Responsive adjustments for mobile */
@media (max-width: 768px) {
    .toast {
        left: 53%;
        bottom: 68%;
        font-size: 14px;       /* Smaller text on mobile */
        margin-right: 20px;
        padding: 7px;
        min-width: 80%;
    }
}
        
        /* --- RESPONSIVE MEDIA QUERIES --- */
        @media (max-width: 589px) {
            .hide-on-small { display: none; }
        }
        @media (max-width: 767px) {  }
        @media (min-width: 768px) {
            .top-nav { display: block; } .bottom-nav { display: none; }
            .page-container { padding: 2.5rem; }
            .products-grid { grid-template-columns: repeat(3, 1fr); gap: 6px; }
            .product-image-wrapper { height: 180px; }
            .hero-banner { height: 350px; padding: 3rem; }
            .hero-banner h2 { font-size: 2.8rem; }
            .hero-banner p { font-size: 1.2rem; max-width: 60%; }
            .footer-content { grid-template-columns: repeat(3, 1fr); text-align: left; }
            .social-links { justify-content: flex-start; }
            /* Detail Page on Tablet */
            .product-detail-container { flex-direction: row; align-items: flex-start; gap: 2rem; padding: 2rem; }
            .product-detail-image-container { flex-basis: 45%; position: sticky; top: 130px; }
            .product-detail-info { flex-basis: 55%; }
            #detail-title { font-size: 2.5rem; }
            .detail-actions { flex-direction: row; align-items: center; }
            .quantity-control { justify-content: flex-start; }
            .detail-add-btn { flex-grow: 1; }
            .back-btn { display: none; /* Hide back button on larger screens */ }
        }
        @media (min-width: 992px) {
            #cart-page-content { display: grid; grid-template-columns: 1.5fr 1fr; gap: 3rem; align-items: start; }
            #cart-page-content .checkout-form { margin-top: 0; position: sticky; top: 140px; }
            .offers-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 1024px) {
            .products-grid { grid-template-columns: repeat(4, 1fr); }
            .hero-banner { height: 400px; }
            .hero-banner h2 { font-size: 3.5rem; }
            .product-detail-container { gap: 3rem; padding: 3rem; }
        }
    </style>
</head>
<body>
    <div class="loading-spinner active">
        <div class="spinner"></div>
    </div>

    <div class="toast" id="toast-notification">
        <i class="fa-regular fa-check-circle"></i>
        <span>Item added to cart!</span>
    </div>

    <header class="app-header">
        <div class="header-content">
            <a href="#" class="logo" onclick="navigateTo('home-page')">FoodFusion</a>
            <div class="search-bar hide-on-small">
                <input type="text" id="search-input" placeholder="Search our premium menu...">
                <button id="search-button"><i class="fa-regular fa-search"></i></button>
            </div>
        </div>
    </header>

    <nav class="top-nav">
        <div class="top-nav-items">
            <a href="#" class="top-nav-item active" onclick="navigateTo('home-page')"><i class="fa-regular fa-house"></i><span>Home</span></a>
            <a href="#" class="top-nav-item" onclick="navigateTo('menu-page')"><i class="fa-regular fa-compass"></i><span>Menu</span></a>
            <a href="#" class="top-nav-item" onclick="navigateTo('wishlist-page')"><i class="fa-regular fa-heart"></i><span>Wishlist</span></a>
            <a href="#" class="top-nav-item" onclick="navigateTo('offers-page')"><i class="fa-regular fa-star"></i><span>Offers</span></a>
            <a href="#" class="top-nav-item" onclick="navigateTo('account-page')"><i class="fa-regular fa-user"></i><span>Account</span></a>
            <a href="#" class="top-nav-item" onclick="navigateTo('cart-page')"><i class="fa-regular fa-shopping-cart"></i><span>Cart</span><div class="cart-count">0</div></a>
        </div>
    </nav>
    
    <main class="page-container">
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="hero-banner">
                <h2>A <span>Golden</span><br>Dining Experience</h2>
                <p>Enjoy our signature dishes, crafted with passion and the finest ingredients, delivered to your door.</p>
            </div>
            <h2 class="section-title">Chef's Specials</h2>
            <div id="home-products-grid" class="products-grid"></div>
            <h2 class="section-title">Trending Now</h2>
            <div id="trending-products-grid" class="products-grid"></div>
        </div>

        <!-- Menu Page -->
        <div id="menu-page" class="page">
            <h2 class="section-title">Our Premium Menu</h2>
            <div class="categories-container">
                <div id="category-filters" class="categories"></div>
            </div>
            <div id="menu-products-grid" class="products-grid"></div>
        </div>

        <!-- Wishlist Page -->
        <div id="wishlist-page" class="page">
            <h2 class="section-title">Your Wishlist</h2>
            <div id="wishlist-products-grid" class="products-grid"></div>
        </div>

        <!-- Offers Page -->
        <div id="offers-page" class="page">
            <h2 class="section-title">Special Offers</h2>
             <div class="offers-grid">
                <div class="offer-card">
                    <i class="fa-regular fa-pizza-slice"></i>
                    <h3>Pizza Paradise</h3>
                    <p>Get 20% off any two large pizzas. Perfect for sharing!</p>
                    <div class="offer-code">CODE: PIZZA20</div>
                </div>
                 <div class="offer-card" style="background: linear-gradient(135deg, var(--primary-gold), #FFD700);">
                    <i class="fa-regular fa-burger-soda" style="color: var(--primary-purple);"></i>
                    <h3 style="color: var(--dark-grey);">The Ultimate Combo</h3>
                    <p style="color: var(--dark-grey); opacity: 0.8;">Buy any burger and get a craft soda for free.</p>
                    <div class="offer-code" style="color: var(--dark-grey); border-color: var(--dark-grey);">CODE: COMBOUP</div>
                </div>
             </div>
        </div>
        
        <!-- Account Page -->
        <div id="account-page" class="page">
            <h2 class="section-title">Your Account</h2>
            <form id="account-form" class="checkout-form" onsubmit="saveAccountDetails(event)">
                <h3>Manage Your Details</h3>
                <p style="margin-bottom: 2rem; color: var(--light-grey); font-family: 'Outfit', sans-serif;">These details will pre-fill the checkout form for faster ordering.</p>
                <div class="form-group">
                    <label for="account-name">Full Name</label>
                    <input type="text" id="account-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="account-email">Email Address</label>
                    <input type="email" id="account-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="account-address">Default Delivery Address</label>
                    <input type="text" id="account-address" name="address" required>
                </div>
                <button type="submit" class="checkout-btn">
                    <i class="fa-regular fa-floppy-disk"></i>
                    Save Details
                </button>
            </form>
        </div>

        <!-- Cart Page -->
        <div id="cart-page" class="page">
            <h2 class="section-title">Your Premium Order</h2>
            <div id="cart-page-content">
                <div id="cart-items-container"></div>
                <form id="checkout-form" class="checkout-form"></form>
            </div>
        </div>
        
        <!-- Confirmation Page -->
        <div id="confirmation-page" class="page">
            <div class="confirmation-container">
                <div class="confirmation-icon"><i class="fa-regular fa-circle-check"></i></div>
                <h2>Order Submitted!</h2>
                <p style="margin-bottom: 1.5rem; color: var(--light-grey); font-family: 'Outfit', sans-serif;">Thank you! Your order has been received and you will get a confirmation email shortly.</p>
                <button class="checkout-btn" onclick="navigateTo('home-page')" style="width: auto; padding: 1rem 2rem;">
                    <i class="fa-regular fa-arrow-left"></i> Back to Home
                </button>
            </div>
        </div>

        <!-- Product Detail Page -->
        <div id="product-detail-page" class="page">
            <div class="product-detail-page-container">
                <div class="product-detail-container">
                    <div class="product-detail-image-container">
                        <img id="detail-image" src="" alt="Product Image">
                    </div>
                    <div class="product-detail-info">
                        <h2 id="detail-title"></h2>
                        <div class="detail-rating">
                            <span id="detail-stars" class="detail-stars"></span>
                            <span id="detail-reviews"></span>
                        </div>
                        <p id="detail-desc"></p>
                        <div id="detail-ingredients" class="ingredients-list"></div>
                        <div class="detail-price-tag" id="detail-price"></div>
                        
                        <div class="detail-actions">
                            <div class="quantity-control">
                                <button id="detail-quantity-minus"><i class="fa-regular fa-minus"></i></button>
                                <span id="detail-quantity">1</span>
                                <button id="detail-quantity-plus"><i class="fa-regular fa-plus"></i></button>
                            </div>
                            <button class="detail-add-btn" id="detail-add-to-cart-btn">
                                <i class="fa-regular fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                         <button class="back-btn" onclick="goBack()">
                            <i class="fa-regular fa-arrow-left"></i> Go Back
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="navigateTo('home-page')"><i class="fa-regular fa-house"></i><span>Home</span></a>
        <a href="#" class="nav-item" onclick="navigateTo('menu-page')"><i class="fa-regular fa-grid-2"></i><span>Menu</span></a>
        <a href="#" class="nav-item" onclick="navigateTo('wishlist-page')"><i class="fa-regular fa-heart"></i><span>Wishes</span></a>
        <a href="#" class="nav-item" onclick="navigateTo('cart-page')">
            <i class="fa-regular fa-shopping-bag"></i><span>Bag</span><div class="cart-count">0</div>
        </a>
    </nav>
<style>
    footer h3{
        color: #ffffff;
    }
    footer{
        text-decoration: none;
        cursor: pointer;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
    }
</style>
    <footer style="background: linear-gradient(135deg, #4b0082, #2e003e); color: #fff; padding: 50px 20px; font-family: 'Segoe UI', sans-serif;">
  <div style="max-width: 1200px; margin: auto; display: flex; flex-wrap: wrap; gap: 40px; justify-content: space-between;">

    <!-- Logo & About -->
    <div style="flex: 1 1 250px;">
      <h2 style="font-size: 30px; font-weight: bold; color: #fff; margin-bottom: 15px;">FoodFusion</h2>
      <p style="color: #dcdcdc; font-size: 15px; line-height: 1.6;">
        Where premium ingredients meet culinary passion. Experience taste that touches your soul.
      </p>
    </div>

    <!-- Explore -->
    <div style="flex: 1 1 180px;">
      <h3 style="margin-bottom: 12px; font-size: 18px;">Explore</h3>
      <a href="#" onclick="navigateTo('home-page')" style="display: block; color: #ccc; text-decoration: none; margin-bottom: 6px;">Home</a>
      <a href="#" onclick="navigateTo('menu-page')" style="display: block; color: #ccc; text-decoration: none; margin-bottom: 6px;">Menu</a>
      <a href="#" onclick="navigateTo('offers-page')" style="display: block; color: #ccc; text-decoration: none; margin-bottom: 6px;">Offers</a>
      <a href="#" onclick="navigateTo('about-page')" style="display: block; color: #ccc; text-decoration: none;">About Us</a>
    </div>

    <!-- Support -->
    <div style="flex: 1 1 180px;">
      <h3 style="margin-bottom: 12px; font-size: 18px;">Support</h3>
      <a href="#" style="display: block; color: #ccc; text-decoration: none; margin-bottom: 6px;">FAQs</a>
      <a href="#" style="display: block; color: #ccc; text-decoration: none; margin-bottom: 6px;">Privacy Policy</a>
      <a href="#" style="display: block; color: #ccc; text-decoration: none;">Terms & Conditions</a>
    </div>

    <!-- Contact -->
    <div style="flex: 1 1 250px;">
      <h3 style="margin-bottom: 12px; font-size: 18px;">Contact</h3>
      <p style="color: #dcdcdc; font-size: 14px;">Email: <a href="mailto:support@foodfusion.com" style="color: #ffffff; text-decoration: none;">support@foodfusion.com</a></p>
      <p style="color: #dcdcdc; font-size: 14px;">Phone: +92 300 1234567</p>
      <div style="margin-top: 10px; display: flex; gap: 10px;">
        <a href="#" style="color: #fff; font-size: 18px;"><i class="fab fa-facebook-f"></i></a>
        <a href="#" style="color: #fff; font-size: 18px;"><i class="fab fa-instagram"></i></a>
        <a href="#" style="color: #fff; font-size: 18px;"><i class="fab fa-twitter"></i></a>
        <a href="#" style="color: #fff; font-size: 18px;"><i class="fab fa-youtube"></i></a>
      </div>
    </div>

  </div>

  <!-- Bottom -->
  <div style="text-align: center; color: #bbb; margin-top: 40px; font-size: 14px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
    Â© 2024 <strong style="color: #fff;">FoodFusion</strong>. All Rights Reserved.
  </div>
</footer>


    <script>
        const products = [
            { id: 1, name: 'Gourmet Cheese Burger', desc: 'A masterpiece of flavor. Premium Angus beef, aged cheddar, crisp lettuce, ripe tomatoes, and our signature truffle aioli on a toasted artisan brioche bun.', price: 15.99, image: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?auto=format&fit=crop&w=800&q=80', category: 'Burgers', rating: 4.8, reviews: 125, ingredients: "Angus Beef, Aged Cheddar, Brioche Bun, Truffle Aioli"},
            { id: 2, name: 'Artisan Pepperoni Pizza', desc: 'Experience pizza perfection. Hand-stretched dough, rich San Marzano tomato sauce, fresh mozzarella, and generous slices of premium cured pepperoni.', price: 18.99, image: 'https://images.unsplash.com/photo-1628840042765-356cda07504e?auto=format&fit=crop&w=800&q=80', category: 'Pizza', rating: 4.9, reviews: 210, ingredients: "San Marzano Tomatoes, Fresh Mozzarella, Cured Pepperoni"},
            { id: 3, name: 'Spicy Glazed Chicken Wings', desc: 'Irresistibly crispy and juicy. Free-range chicken wings fried to a perfect golden brown, tossed in our signature sweet and spicy sriracha glaze.', price: 13.99, image: 'https://images.unsplash.com/photo-1629547123297-c454a5a73a67?auto=format&fit=crop&w=800&q=80', category: 'Chicken', rating: 4.7, reviews: 98, ingredients: "Free-Range Chicken, Sriracha Glaze, Sesame Seeds"},
            { id: 4, name: 'Molten Chocolate Lava Cake', desc: 'A dessert lover\'s dream. Decadent Valrhona chocolate cake with a gooey molten center, served with vanilla bean ice cream and a raspberry coulis.', price: 9.99, image: 'https://images.unsplash.com/photo-1586985289936-a8aabe051512?auto=format&fit=crop&w=800&q=80', category: 'Desserts', rating: 5.0, reviews: 150, ingredients: "Valrhona Chocolate, Vanilla Bean Ice Cream, Raspberry"},
            { id: 5, name: 'Black Label Bacon Burger', desc: 'The pinnacle of indulgence. A Wagyu beef patty, thick-cut applewood smoked bacon, aged gouda, and caramelized onions on a toasted brioche.', price: 19.99, image: 'https://images.unsplash.com/photo-1606131731446-5568d87113aa?auto=format&fit=crop&w=800&q=80', category: 'Burgers', rating: 4.9, reviews: 110, ingredients: "Wagyu Beef, Applewood Bacon, Aged Gouda"},
            { id: 6, name: 'Truffle Margherita Pizza', desc: 'The classic, elevated. Creamy buffalo mozzarella, fresh basil, San Marzano tomatoes, and a generous drizzle of aromatic white truffle oil.', price: 22.99, image: 'https://images.unsplash.com/photo-1595854341625-f33ee10dbf94?auto=format&fit=crop&w=800&q=80', category: 'Pizza', rating: 4.8, reviews: 180, ingredients: "Buffalo Mozzarella, White Truffle Oil, Fresh Basil"},
            { id: 7, name: 'Grilled Lemon Herb Salmon', desc: 'Sustainably-sourced Atlantic salmon grilled to perfection, served with roasted asparagus and a light lemon-dill butter sauce.', price: 24.99, image: 'https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?auto=format&fit=crop&w=800&q=80', category: 'Seafood', rating: 4.7, reviews: 85, ingredients: "Atlantic Salmon, Asparagus, Lemon-Dill Butter"},
            { id: 8, name: 'Avocado Power Salad', desc: 'A vibrant mix of organic quinoa, creamy avocado, cherry tomatoes, cucumber, and feta cheese with a zesty citrus vinaigrette.', price: 14.99, image: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=800&q=80', category: 'Salads', rating: 4.6, reviews: 75, ingredients: "Quinoa, Avocado, Feta Cheese, Citrus Vinaigrette"},
            { id: 9, name: 'Crispy Calamari', desc: 'Tender calamari rings lightly breaded and fried until golden. Served with a zesty marinara and a creamy garlic aioli for dipping.', price: 12.99, image: 'https://images.unsplash.com/photo-1549605221-35a7a582df94?auto=format&fit=crop&w=800&q=80', category: 'Seafood', rating: 4.5, reviews: 60, ingredients: "Calamari, Marinara, Garlic Aioli"},
            { id: 10, name: 'Golden Truffle Fries', desc: 'Our signature crispy fries, double-fried for extra crunch and tossed with white truffle oil, parmesan cheese, and fresh parsley.', price: 8.99, image: 'https://images.unsplash.com/photo-1598679253331-c097b6999b65?auto=format&fit=crop&w=800&q=80', category: 'Sides', rating: 4.9, reviews: 250, ingredients: "Potatoes, Truffle Oil, Parmesan"},
            { id: 11, name: 'Tiramisu Classico', desc: 'An authentic Italian delight. Layers of coffee-soaked ladyfingers and creamy mascarpone cheese, dusted with rich cocoa powder.', price: 9.99, image: 'https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?auto=format&fit=crop&w=800&q=80', category: 'Desserts', rating: 4.8, reviews: 130, ingredients: "Mascarpone, Ladyfingers, Espresso, Cocoa"},
            { id: 12, name: 'Passionfruit Mojito', desc: 'A refreshing tropical twist on the classic. White rum, fresh mint, lime, and exotic passionfruit puree, topped with soda water.', price: 11.99, image: 'https://images.unsplash.com/photo-1595991254552-21a11f7142fb?auto=format&fit=crop&w=800&q=80', category: 'Drinks', rating: 4.7, reviews: 55, ingredients: "White Rum, Passionfruit, Mint, Lime"},
            { id: 13, name: 'Southern Fried Chicken', desc: 'Two pieces of our signature buttermilk-brined chicken, fried to a crispy, golden-brown perfection. A comforting classic.', price: 16.99, image: 'https://images.unsplash.com/photo-1569058242253-92a9c5552b5a?auto=format&fit=crop&w=800&q=80', category: 'Chicken', rating: 4.8, reviews: 142, ingredients: "Buttermilk-brined Chicken, Secret Spice Blend"},
            { id: 14, name: 'Classic Caesar Salad', desc: 'Crisp romaine lettuce, house-made sourdough croutons, and shaved Parmesan, all tossed in our creamy, classic Caesar dressing.', price: 12.99, image: 'https://images.unsplash.com/photo-1550304943-4f24f54ddde9?auto=format&fit=crop&w=800&q=80', category: 'Salads', rating: 4.5, reviews: 93, ingredients: "Romaine Lettuce, Sourdough Croutons, Parmesan"},
            { id: 15, name: 'Garlic Bread Twists', desc: 'Warm, soft bread twists baked with garlic butter and herbs, served with a side of our classic marinara sauce for dipping.', price: 7.99, image: 'https://images.unsplash.com/photo-1593342371429-43c3f890e0e0?auto=format&fit=crop&w=800&q=80', category: 'Sides', rating: 4.6, reviews: 115, ingredients: "Bread Dough, Garlic Butter, Herbs"},
            { id: 16, name: 'Espresso Martini', desc: 'The perfect pick-me-up. A smooth blend of premium vodka, coffee liqueur, and a shot of freshly brewed espresso.', price: 13.99, image: 'https://images.unsplash.com/photo-1621217092305-6a56b276226c?auto=format&fit=crop&w=800&q=80', category: 'Drinks', rating: 4.9, reviews: 88, ingredients: "Vodka, Coffee Liqueur, Espresso"}
        ];

        let currentPage = 'home-page';
        let previousPage = '';
        let cartItems = [];
        let wishlistItems = [];

        function navigateTo(pageId) {
            if (pageId === currentPage) return;
            const loadingSpinner = document.querySelector('.loading-spinner');
            const pageElement = document.getElementById(pageId);
            if (!pageElement) return;

            loadingSpinner.classList.add('active');
            
            setTimeout(() => {
                if (pageId !== 'product-detail-page') previousPage = currentPage;
                
                document.querySelector('.page.active')?.classList.remove('active');
                pageElement.classList.add('active');
                currentPage = pageId;
                
                updateActiveNav(pageId);
                
                if (pageId === 'wishlist-page') renderWishlistPage();
                
                window.scrollTo(0, 0);
                loadingSpinner.classList.remove('active');
            }, 300);
        }

        function goBack() {
            navigateTo(previousPage || 'home-page');
        }

        function updateActiveNav(pageId) {
            const currentMainPage = pageId === 'product-detail-page' ? previousPage : pageId;
            document.querySelectorAll('.nav-item, .top-nav-item').forEach(item => {
                const navPageId = item.getAttribute('onclick').match(/'([^']+)'/)[1];
                item.classList.toggle('active', navPageId === currentMainPage);
            });
        }
        
        function createProductCard(product) {
            const isWishlisted = wishlistItems.includes(product.id);
            return `
                <div class="product-card" onclick="showProductDetail(${product.id})">
                    <button class="wishlist-btn ${isWishlisted ? 'wishlisted' : ''}" onclick="event.stopPropagation(); toggleWishlist(${product.id});">
                        <i class="fa-${isWishlisted ? 'solid' : 'regular'} fa-heart"></i>
                    </button>
                    <div class="product-image-wrapper">
                        <img src="${product.image}" alt="${product.name}" class="product-image">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-desc">${product.desc}</p>
                        <div class="product-footer">
                            <span class="product-price">$${product.price.toFixed(2)}</span>
                            <button class="add-to-cart" onclick="event.stopPropagation(); addToCart(${product.id});"><i class="fa-regular fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderProducts(containerId, productList) {
            const container = document.getElementById(containerId);
            if(container) container.innerHTML = productList.map(createProductCard).join('');
        }
        
        // --- WISHLIST FUNCTIONS ---
        function loadWishlist() {
            wishlistItems = JSON.parse(localStorage.getItem('foodFusionWishlist') || '[]');
        }

        function saveWishlist() {
            localStorage.setItem('foodFusionWishlist', JSON.stringify(wishlistItems));
        }

        function toggleWishlist(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const productIndex = wishlistItems.indexOf(productId);
            if (productIndex > -1) {
                wishlistItems.splice(productIndex, 1);
                showToast(`${product.name} removed from wishlist`);
            } else {
                wishlistItems.push(productId);
                showToast(`${product.name} added to wishlist!`);
            }
            saveWishlist();
            updateAllProductGrids();
        }

        function renderWishlistPage() {
            const container = document.getElementById('wishlist-products-grid');
            if (!container) return;
            const wishlistedProducts = products.filter(p => wishlistItems.includes(p.id));
            if (wishlistedProducts.length > 0) {
                container.innerHTML = wishlistedProducts.map(createProductCard).join('');
            } else {
                container.innerHTML = `<div class="empty-state-container">
                    <i class="fa-regular fa-heart-crack"></i>
                    <h3>Your Wishlist is Empty</h3>
                    <p>Tap the heart on any dish to save it for later!</p>
                </div>`;
            }
        }
        
        function updateAllProductGrids() {
            renderProducts('home-products-grid', products.slice(0, 4));
            renderProducts('trending-products-grid', products.slice(4, 8));
            filterAndRenderProducts(); // For menu page
            if (currentPage === 'wishlist-page') renderWishlistPage();
        }

        function filterAndRenderProducts() {
            const container = document.getElementById('menu-products-grid');
            if (!container) return;
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const activeCategory = document.querySelector('.category.active')?.dataset.category || 'All';
            
            let filteredProducts = products.filter(p => {
                const inCategory = activeCategory === 'All' || p.category === activeCategory;
                const inSearch = !searchTerm || p.name.toLowerCase().includes(searchTerm) || p.desc.toLowerCase().includes(searchTerm);
                return inCategory && inSearch;
            });

            if (filteredProducts.length > 0) {
                container.innerHTML = filteredProducts.map(createProductCard).join('');
            } else {
                container.innerHTML = `<div class="empty-state-container"><i class="fa-regular fa-magnifying-glass"></i><h3>No Dishes Found</h3><p>Try adjusting your search or category filter.</p></div>`;
            }
        }

        function renderCategories() {
            const categories = ['All', ...new Set(products.map(p => p.category))];
            const container = document.getElementById('category-filters');
            const categoryIcons = { 'Burgers': 'fa-burger', 'Pizza': 'fa-pizza-slice', 'Chicken': 'fa-drumstick-bite', 'Salads': 'fa-leaf', 'Desserts': 'fa-ice-cream', 'Drinks': 'fa-martini-glass-citrus', 'Seafood': 'fa-shrimp', 'Sides': 'fa-french-fries', 'All': 'fa-utensils' };
            if(container) {
                container.innerHTML = categories.map(cat => `<div class="category ${cat === 'All' ? 'active' : ''}" data-category="${cat}"><i class="fa-regular ${categoryIcons[cat] || 'fa-utensils'}"></i><div>${cat}</div></div>`).join('');
                container.querySelectorAll('.category').forEach(button => {
                    button.addEventListener('click', () => {
                        container.querySelector('.category.active').classList.remove('active');
                        button.classList.add('active');
                        filterAndRenderProducts();
                    });
                });
            }
        }

        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            document.getElementById('detail-image').src = product.image;
            document.getElementById('detail-title').textContent = product.name;
            document.getElementById('detail-desc').textContent = product.desc;
            document.getElementById('detail-price').textContent = `$${product.price.toFixed(2)}`;
            
            // Ratings and Reviews
            let stars = '';
            for (let i = 0; i < 5; i++) {
                stars += `<i class="fa-${i < Math.round(product.rating) ? 'solid' : 'regular'} fa-star"></i>`;
            }
            document.getElementById('detail-stars').innerHTML = stars;
            document.getElementById('detail-reviews').textContent = `(${product.reviews} reviews)`;

            // Ingredients
            const ingredientsContainer = document.getElementById('detail-ingredients');
            ingredientsContainer.innerHTML = `<h4>Key Ingredients</h4><p>${product.ingredients}</p>`;
            
            // Quantity
            let quantity = 1;
            const quantityEl = document.getElementById('detail-quantity');
            quantityEl.textContent = quantity;
            document.getElementById('detail-quantity-minus').onclick = () => {
                if (quantity > 1) {
                    quantity--;
                    quantityEl.textContent = quantity;
                }
            };
            document.getElementById('detail-quantity-plus').onclick = () => {
                quantity++;
                quantityEl.textContent = quantity;
            };

            // Add to Cart Button
            document.getElementById('detail-add-to-cart-btn').onclick = () => {
                addToCart(product.id, quantity);
                showToast(`${quantity} x ${product.name} added to cart!`);
            };

            navigateTo('product-detail-page');
        }

        // --- CART FUNCTIONS ---
        function renderCart() {
            const container = document.getElementById('cart-items-container');
            const checkoutForm = document.getElementById('checkout-form');
            if(!container || !checkoutForm) return;
            
            checkoutForm.innerHTML = `
                <h3>Customer Details</h3>
                <div class="form-group"><label for="name">Full Name</label><input type="text" id="name" name="name" required></div>
                <div class="form-group"><label for="email">Email Address</label><input type="email" id="email" name="email" required></div>
                <div class="form-group"><label for="address">Delivery Address</label><input type="text" id="address" name="address" required></div>
                <div class="cart-summary">
                    <h3>Order Summary</h3>
                    <div class="summary-row"><span>Subtotal:</span><span id="summary-subtotal">$0.00</span></div>
                    <div class="summary-row"><span>Delivery (>$50 FREE):</span><span id="summary-delivery">$0.00</span></div>
                    <div class="summary-row"><span>Tax (8%):</span><span id="summary-tax">$0.00</span></div>
                    <div class="summary-row total-row"><span>Total:</span><span id="summary-total">$0.00</span></div>
                    <button type="submit" class="checkout-btn" id="checkout-btn-submit" disabled>
                        <i class="fa-regular fa-credit-card"></i> Submit Order
                    </button>
                </div>`;
            
            if (cartItems.length === 0) {
                container.innerHTML = `<div class="empty-state-container"><i class="fa-regular fa-cart-shopping"></i><h3>Your cart is empty</h3><p>Start adding some premium items to your order!</p></div>`;
                checkoutForm.style.display = 'none';
                updateCartSummary();
                return;
            }

            checkoutForm.style.display = 'block';
            container.innerHTML = cartItems.map(cartItem => {
                const product = products.find(p => p.id === cartItem.id);
                return `<div class="cart-item"><img src="${product.image}" class="cart-item-image"><div class="cart-item-details"><h3 class="cart-item-title">${product.name}</h3><p class="product-price">$${product.price.toFixed(2)}</p><div class="cart-item-actions"><button class="quantity-btn" onclick="updateQuantity(${product.id}, -1)"><i class="fa-regular fa-minus"></i></button><span class="quantity-value">${cartItem.quantity}</span><button class="quantity-btn" onclick="updateQuantity(${product.id}, 1)"><i class="fa-regular fa-plus"></i></button><button class="remove-btn" onclick="removeItem(${product.id})"><i class="fa-regular fa-trash-can"></i></button></div></div></div>`;
            }).join('');
            
            updateCartSummary();
            populateForms(JSON.parse(localStorage.getItem('foodFusionUser')));
        }
        
        function updateCartSummary() {
            const subtotal = cartItems.reduce((sum, item) => sum + (products.find(p => p.id === item.id).price * item.quantity), 0);
            const deliveryFee = subtotal > 0 && subtotal < 50 ? 4.99 : 0;
            const tax = subtotal * 0.08;
            const total = subtotal + deliveryFee + tax;
            
            document.getElementById('summary-subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('summary-delivery').textContent = subtotal > 50 ? 'FREE' : `$${deliveryFee.toFixed(2)}`;
            document.getElementById('summary-tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('summary-total').textContent = `$${total.toFixed(2)}`;
            
            const checkoutBtn = document.getElementById('checkout-btn-submit');
            if(checkoutBtn) checkoutBtn.disabled = cartItems.length === 0;

            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            document.querySelectorAll('.cart-count').forEach(el => {
                el.textContent = totalItems;
                el.classList.toggle('visible', totalItems > 0);
            });
        }

        function addToCart(productId, quantity = 1) {
            const existingItem = cartItems.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cartItems.push({ id: productId, quantity: quantity });
            }
            renderCart();
            const product = products.find(p => p.id === productId);
            if (currentPage !== 'product-detail-page') {
                showToast(`${product.name} added to cart!`);
            }
        }
        
        function updateQuantity(productId, change) {
            const item = cartItems.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) removeItem(productId, false);
                else renderCart();
            }
        }

        function removeItem(productId, showMsg = true) {
            const product = products.find(p => p.id === productId);
            cartItems = cartItems.filter(item => item.id !== productId);
            renderCart();
            if(showMsg) showToast(`${product.name} removed from cart`);
        }

        // --- ACCOUNT & FORM HANDLING ---
        function saveAccountDetails(event) {
            event.preventDefault(); 
            const userDetails = { name: document.getElementById('account-name').value, email: document.getElementById('account-email').value, address: document.getElementById('account-address').value };
            localStorage.setItem('foodFusionUser', JSON.stringify(userDetails));
            showToast('Your details have been saved!');
        }

        function loadAccountDetails() {
            const savedDetails = JSON.parse(localStorage.getItem('foodFusionUser'));
            if (savedDetails) populateForms(savedDetails);
        }

        function populateForms(details) {
            if (!details) return;
            ['account-name', 'account-email', 'account-address', 'name', 'email', 'address'].forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    if (id.includes('name')) el.value = details.name || '';
                    if (id.includes('email')) el.value = details.email || '';
                    if (id.includes('address')) el.value = details.address || '';
                }
            });
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast-notification');
            toast.querySelector('span').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            loadAccountDetails();
            loadWishlist();
            renderCategories();
            updateAllProductGrids();
            renderCart();
            
            document.querySelector('.loading-spinner').classList.remove('active');

            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const handleSearch = () => {
                if (currentPage !== 'menu-page') navigateTo('menu-page');
                filterAndRenderProducts();
            };
            searchInput.addEventListener('keyup', handleSearch);
            searchButton.addEventListener('click', handleSearch);

            const checkoutForm = document.getElementById('checkout-form');
            checkoutForm.addEventListener('submit', function (event) {
                event.preventDefault();
                // Replace with your actual Web3Forms Access Key
                const access_key = "9c0dc60b-4afe-4c0d-b953-cf8767abbed9"; 
                if (!access_key) {
                    alert("Web3Forms Access Key not set. Please add it to the script.");
                    return;
                }

                const loadingSpinner = document.querySelector('.loading-spinner');
                loadingSpinner.classList.add('active');
                
                const formData = new FormData(checkoutForm);
                formData.append("access_key", access_key);
                
                // Detailed Order Summary for Email
                const orderSummary = cartItems.map(item => {
                    const product = products.find(p => p.id === item.id);
                    return `${item.quantity} x ${product.name} - $${(product.price * item.quantity).toFixed(2)}`;
                }).join('\n');
                const totalCost = document.getElementById('summary-total').textContent;
                
                formData.append("Order Details", orderSummary);
                formData.append("--- TOTAL COST ---", totalCost);
                formData.append("subject", `New FoodFusion Order from ${formData.get('name')}`);

                fetch("https://api.web3forms.com/submit", { method: "POST", body: formData })
                .then(res => res.json())
                .then(data => {
                    loadingSpinner.classList.remove('active');
                    if (data.success) {
                        cartItems = [];
                        checkoutForm.reset();
                        renderCart();
                        navigateTo('confirmation-page');
                    } else {
                        console.error("Error from Web3Forms:", data);
                        showToast("Order submission failed. Please try again.");
                    }
                })
                .catch(error => {
                    loadingSpinner.classList.remove('active');
                    console.error("Fetch Error:", error);
                    showToast("An error occurred. Please check your connection.");
                });
            });
        });
    </script>
</body>
</html>
